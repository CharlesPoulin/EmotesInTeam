@page "/authentication/login"
@inject IAccessTokenProvider AccessTokenProvider
@inject NavigationManager NavigationManager
@using Microsoft.AspNetCore.Components.WebAssembly.Authentication

@code {
    protected override async Task OnInitializedAsync()
    {
        var result = await AccessTokenProvider.RequestAccessToken(
            new AccessTokenRequestOptions
            {
                Scopes = new[] { "https://graph.microsoft.com/User.Read" }
            });

        if (!result.TryGetToken(out var token))
        {
            // Force the login process
            NavigationManager.NavigateTo("MicrosoftIdentity/Account/SignIn", true);
        }
        else
        {
            // Redirect to the home page if already logged in
            NavigationManager.NavigateTo("/");
        }
    }
}